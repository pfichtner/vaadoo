<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>io.github.pfichtner</groupId>
		<artifactId>vaadoo-bytebuddy-tests-parent</artifactId>
		<version>0.0.1-SNAPSHOT</version>
		<relativePath>../vaadoo-bytebuddy-tests-parent/pom.xml</relativePath>
	</parent>

	<artifactId>vaadoo-bytebuddy-tests-vaadoo</artifactId>
	<name>Vaadoo - ByteBuddy - Tests - Vaadoo</name>

	<dependencies>

		<dependency>
			<groupId>org.jmolecules</groupId>
			<artifactId>jmolecules-ddd</artifactId>
			<version>2.0.1</version>
		</dependency>

		<!-- nodep artifact provides the plugin registration and minimal
		     classes required for classpath discovery by the byte-buddy
		     plugin without bringing full runtime dependencies. -->
		<dependency>
			<groupId>${project.groupId}</groupId>
			<artifactId>vaadoo-bytebuddy-nodep</artifactId>
			<version>${project.version}</version>
		</dependency>

		<!-- Ensure the plugin implementation class is available on the
		     test classpath so classPathDiscovery can load the plugin. -->
		<dependency>
			<groupId>${project.groupId}</groupId>
			<artifactId>vaadoo-bytebuddy</artifactId>
			<version>${project.version}</version>
		</dependency>

		<dependency>
			<groupId>org.mockito</groupId>
			<artifactId>mockito-core</artifactId>
			<version>5.20.0</version>
			<scope>test</scope>
		</dependency>

	</dependencies>

	<build>

		<plugins>

			<!-- to have tests for records we need at least Java 14 -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<source>17</source>
					<target>17</target>
				</configuration>
			</plugin>

			<!-- Use managed byte-buddy plugin from ../vaadoo-bytebuddy-tests/pom.xml -->
			<plugin>
				<groupId>net.bytebuddy</groupId>
				<artifactId>byte-buddy-maven-plugin</artifactId>
				<executions>
					<execution>
						<phase>process-classes</phase>
						<goals>
							<goal>transform-extended</goal>
						</goals>
					</execution>
				</executions>
			</plugin>

		</plugins>

	</build>

</project>
